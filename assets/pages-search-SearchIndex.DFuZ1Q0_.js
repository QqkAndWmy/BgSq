import{_ as a,g as e,h as l,o as t,w as s,a as u,i as o,c as i,B as r,F as n,f as c,m as d,t as p,r as f,A as v,L as m,x as y,Z as _,d as h,e as k,b as g,y as x,D as C}from"./index-BpbZ6T0G.js";import{_ as b}from"./uni-easyinput.DrQNDsNM.js";import{Q as w}from"./QuestionItem.DEA59qMN.js";import{S as I}from"./ShareItem.V3wa989P.js";import{E as L}from"./ExamQuestionItem.SgsDmbS0.js";import"./uni-rate.BSKBJ-Oq.js";import"./uni-data-checkbox.GjnEvMPD.js";import"./uni-forms-item.B8Sdv0Rv.js";import"./uv-parse.BoNYvFCG.js";const j=a({__name:"Tag",props:{dataList:{type:Array,default:[]},showClose:{type:Boolean,default:!0}},emits:["updateData","clickHandler"],setup(a,{emit:f}){const{proxy:v}=e(),m=a,y=f;return(e,f)=>{const v=o;return t(),l(v,null,{default:s((()=>[u(v,{class:"tab-list"},{default:s((()=>[(t(!0),i(n,null,c(a.dataList,((e,o)=>(t(),l(v,{class:"tab-item"},{default:s((()=>[u(v,{class:"text",onClick:a=>(a=>{y("clickHandler",a)})(e)},{default:s((()=>[d(p(e),1)])),_:2},1032,["onClick"]),a.showClose?(t(),l(v,{key:0,class:"iconfont icon-close",onClick:a=>(a=>{m.dataList.splice(a,1),y("updateData")})(o)},null,8,["onClick"])):r("",!0)])),_:2},1024)))),256)),0==a.dataList.length?(t(),l(v,{key:0,class:"no-data"},{default:s((()=>[d("暂无记录")])),_:1})):r("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-8eea903c"]]),H=a({__name:"SearchIndex",setup(a){const{proxy:H}=e(),S=f(!0),D=f(),T=f(v(m.searchHistory.key)||[]),N=a=>{""==a&&(S.value=!0)},A=a=>{D.value="",S.value=!0},E=a=>{D.value=a,V()},Q=()=>{C(m.searchHistory.key,T.value)},V=()=>{null==D.value||D.value.length<3?H.Message.error("请输入关键字"):(S.value=!1,T.value.includes(D.value)||(T.value.unshift(D.value),C(m.searchHistory.key,T.value)),U.pageNo=1,M())},q=f(0),B=f(["八股文","考题","分享"]),U=f({}),F=f(null),M=async()=>{if(null==D.value||D.value.length<3)return void _();F.value="loading";let a=await H.Request({url:H.Api.search,params:{keyword:D.value,pageNo:U.value.pageNo||1,type:q.value}});if(!a)return;F.value="more";a.data.list.forEach((a=>{a.curTab=q.value,a.title=a.title.toLowerCase(),a.title=a.title.replace(D.value,"<span style='color:red'>"+D.value+"</span>")})),U.value=a.data};return M(),y((()=>{})),(a,e)=>{const f=h(k("uni-easyinput"),b),v=o,m=g("Navbar"),y=g("DataList");return t(),l(v,null,{default:s((()=>[u(m,{showLeft:!0},{default:s((()=>[u(v,{class:"search-panel"},{default:s((()=>[u(f,{clearable:!1,modelValue:D.value,"onUpdate:modelValue":e[0]||(e[0]=a=>D.value=a),placeholder:"请输入关键词，至少三个词",prefixIcon:"search",suffixIcon:D.value?"closeempty":"",trim:!0,confirmType:"搜索",onConfirm:V,onInput:N,onIconClick:A},null,8,["modelValue","suffixIcon"])])),_:1})])),right:s((()=>[u(v,{class:"iconfont icon-search",onClick:V})])),_:1}),S.value?(t(),l(v,{key:0,class:"search-history"},{default:s((()=>[u(v,{class:"search-title"},{default:s((()=>[d("搜索历史")])),_:1}),u(v,{class:"tag-list"},{default:s((()=>[u(j,{dataList:T.value,onUpdateData:Q,onClickHandler:E},null,8,["dataList"])])),_:1})])),_:1})):(t(),l(v,{key:1},{default:s((()=>[u(v,{class:"search-tab"},{default:s((()=>[(t(!0),i(n,null,c(B.value,((a,e)=>(t(),l(v,{class:x(["tab-item",e==q.value?"active":""]),onClick:a=>(a=>{q.value=a,U.pageNo=1,U.list=[],M()})(e)},{default:s((()=>[d(p(a),1)])),_:2},1032,["class","onClick"])))),256))])),_:1}),u(v,{class:x(["result-list",0==q.value?"padding-data-list":""])},{default:s((()=>[u(y,{dataSource:U.value,onLoadData:M,loadStatus:F.value},{default:s((({data:a,extParam:e})=>[0==a.curTab?(t(),l(w,{key:0,data:a},null,8,["data"])):r("",!0),1==a.curTab?(t(),l(v,{key:1,class:"list-item"},{default:s((()=>[u(L,{data:a,showAnswer:!0,showHtml:!0},null,8,["data"])])),_:2},1024)):r("",!0),2==a.curTab?(t(),l(v,{key:2,class:"list-item"},{default:s((()=>[u(I,{data:a},null,8,["data"])])),_:2},1024)):r("",!0)])),_:1},8,["dataSource","loadStatus"])])),_:1},8,["class"])])),_:1}))])),_:1})}}},[["__scopeId","data-v-5614a6ad"]]);export{H as default};
