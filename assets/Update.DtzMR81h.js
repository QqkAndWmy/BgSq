import{_ as e,h as t,B as s,o as i,w as r,a,i as o,q as d,y as l,R as h,T as n,g as u,J as c,r as p,b as g,k as f,c as _,m,t as w,l as y,F as b,f as v,U as B}from"./index-BpbZ6T0G.js";const k=e({name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:()=>({column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}),created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach(((e,t)=>{e===this&&this.grid.children.splice(t,1)}))},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}},[["render",function(e,n,u,c,p,g){const f=o;return p.width?(i(),t(f,{key:0,style:d("width:"+p.width+";"+(p.square?"height:"+p.width:"")),class:"uni-grid-item"},{default:r((()=>[a(f,{class:l([{"uni-grid-item--border":p.showBorder,"uni-grid-item--border-top":p.showBorder&&u.index<p.column,"uni-highlight":p.highlight},"uni-grid-item__box"]),style:d({"border-right-color":p.borderColor,"border-bottom-color":p.borderColor,"border-top-color":p.borderColor}),onClick:g._onClick},{default:r((()=>[h(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onClick"])])),_:3},8,["style"])):s("",!0)}],["__scopeId","data-v-e2fd0340"]]);const C=e({name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data:()=>({elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,width:0}),created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){setTimeout((()=>{this._getSize((e=>{this.children.forEach(((t,s)=>{t.width=e}))}))}),50)},change(e){this.$emit("change",e)},_getSize(e){n().in(this).select(`#${this.elId}`).boundingClientRect().exec((t=>{this.width=parseInt((t[0].width-1)/this.column)+"px",e(this.width)}))}}},[["render",function(e,s,n,u,c,p){const g=o;return i(),t(g,{class:"uni-grid-wrap"},{default:r((()=>[a(g,{id:c.elId,ref:"uni-grid",class:l(["uni-grid",{"uni-grid--border":n.showBorder}]),style:d({"border-left-color":n.borderColor})},{default:r((()=>[h(e.$slots,"default",{},void 0,!0)])),_:3},8,["id","class","style"])])),_:3})}],["__scopeId","data-v-9604b287"]]),x=""+new URL("update_bg-Czb28TgJ.png",import.meta.url).href,U=e({__name:"Update",setup(e,{expose:d}){const{proxy:l}=u(),h=c(),{deviceId:n,appVersion:k}=h.getInfo(),C=p(),U=p({}),I=p(!1),z=p({progress:0,totalBytesWritten:0,totalBytesExpectedToWrite:0});d({checkUpdate:async e=>{I.value=!1;let t=await l.Request({url:l.Api.checkUpdate,showLoading:e,params:{deviceId:n,appVersion:k}});t&&(null!=t.data?(U.value=t.data,C.value.show()):e&&l.Message.success("已经是最新版"))}});const q=()=>{C.value.close()};return(e,d)=>{const h=f,n=o,u=B,c=g("Dialog");return i(),t(n,null,{default:r((()=>[a(c,{ref_key:"checkDialogRef",ref:C,styleBg:"none",styleBorder:"none",showCancel:!1},{default:r((()=>[a(n,{class:"update-panel"},{default:r((()=>[a(n,{class:"update-img"},{default:r((()=>[a(h,{src:x,mode:"widthFix"})])),_:1}),a(n,{class:"update-body"},{default:r((()=>[a(n,{class:"update-version"},{default:r((()=>[m(" 升级到最新版本V"+w(U.value.version),1)])),_:1}),a(n,{class:"file-siez"},{default:r((()=>[m(" 文件大小："+w(y(l).Utils.size2Str(U.value.size)),1)])),_:1}),a(n,{class:"update-info-title"},{default:r((()=>[m("更新内容：")])),_:1}),(i(!0),_(b,null,v(U.value.updateList,((e,s)=>(i(),t(n,{class:"update-info"},{default:r((()=>[m(w(s+1)+"、"+w(e),1)])),_:2},1024)))),256)),I.value?(i(),t(n,{key:0,class:"update-progress"},{default:r((()=>[a(u,{percent:z.value.progress,"show-info":"","stroke-width":"3"},null,8,["percent"]),a(n,{class:"update-tips"},{default:r((()=>[m(" 正在下载，请稍后("+w(y(l).Utils.size2Str(z.value.totalBytesWritten))+"/"+w(y(l).Utils.size2Str(z.value.totalBytesExpectedToWrite))+") ",1)])),_:1})])),_:1})):s("",!0),I.value?s("",!0):(i(),t(n,{key:1,class:"update-btn"},{default:r((()=>[m("更新内容最后一条")])),_:1}))])),_:1}),I.value?s("",!0):(i(),t(n,{key:0,class:"update-close"},{default:r((()=>[a(n,{class:"iconfont icon-close",onClick:q})])),_:1}))])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-4296c4ed"]]);export{U,k as _,C as a};
