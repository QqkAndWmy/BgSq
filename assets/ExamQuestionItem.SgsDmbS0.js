import{_ as e,g as a,d as t,e as s,h as l,o as n,w as u,a as o,c as r,B as i,i as d,$ as c,C as f,m,t as p,F as y,q as w,a3 as _,a4 as h,A as x,L as q,D as k}from"./index-BpbZ6T0G.js";import{_ as v}from"./uni-data-checkbox.GjnEvMPD.js";import{_ as A}from"./uni-forms-item.B8Sdv0Rv.js";import{_ as b}from"./uni-rate.BSKBJ-Oq.js";import{u as g}from"./uv-parse.BoNYvFCG.js";const I=e({__name:"ExamQuestionItem",props:{modelValue:{type:[String,Array]},height:{type:Number},data:{type:Object,default:{}},index:{type:Number},showAnswer:{type:Boolean,default:!1},showHtml:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:I}){const{proxy:j}=a(),L=e,R=e=>{let a=[];if(0==e.questionType)return a=[{text:"正确",value:"1",disable:L.showAnswer},{text:"错误",value:"0",disable:L.showAnswer}],a;const t=e.questionItemList;for(let s=0;s<t.length;s++)a.push({text:h[s]+"、"+t[s].title,value:s+"",disable:L.showAnswer});return a},T=I,V=e=>{const a=e.detail.value;T("update:modelValue",a),B(a)},B=e=>{const a=L.data;let t=x(q.exam_answer.key);""==t&&(t={}),null==t[a.examId]&&(t[a.examId]={}),t[a.examId][a.questionId]=e,k(q.exam_answer.key,t)},C=(e,a)=>{const t=0==a?e.questionAnswer:e.userAnswer;if(null==t)return"";if(0==e.questionType)return"0"==t?"错误":"正确";{let e=t;t instanceof Array||(e=t.split(","));const a=[];return e.forEach((e=>{a.push(h[Number.parseInt(e)])})),a.join("、")}};return(a,h)=>{const x=c,q=d,k=t(s("uni-data-checkbox"),v),I=t(s("uni-forms-item"),A),j=f,L=t(s("uni-rate"),b);return n(),l(q,{class:"question-item",style:w({height:e.height?e.height+"px":"auto"})},{default:u((()=>[o(q,{class:"question-content"},{default:u((()=>[o(q,{class:"title-info"},{default:u((()=>{return[o(x,{nodes:(a=e.data,`${a.title}(${_[a.questionType]})`),class:"title"},null,8,["nodes"])];var a})),_:1}),e.data.question&&e.showHtml?(n(),l(q,{key:0,class:"rich-text"},{default:u((()=>[o(g,{content:e.data.question},null,8,["content"])])),_:1})):i("",!0),(n(),l(I,{name:["questionList",e.index,"userAnswer"],key:e.data.questionId,rules:[{required:!0,errorMessage:"请选择答案"}]},{default:u((()=>[o(q,{class:"question-option"},{default:u((()=>[o(k,{wrap:!0,onChange:V,multiple:2==e.data.questionType,"model-value":e.modelValue,localdata:R(e.data)},null,8,["multiple","model-value","localdata"])])),_:1})])),_:1},8,["name"])),e.showAnswer?(n(),l(q,{key:1,class:"question-answer"},{default:u((()=>[o(j,null,{default:u((()=>[m("答案")])),_:1}),o(j,{class:"answer"},{default:u((()=>[m(p(C(e.data,0)),1)])),_:1}),null!=e.data.answerResult&&0!=e.data.answerResult?(n(),r(y,{key:0},[o(j,null,{default:u((()=>[m("您选择")])),_:1}),o(j,{class:"answer my"},{default:u((()=>[m(p(C(e.data,1)),1)])),_:1}),1==e.data.answerResult?(n(),l(j,{key:0,class:"iconfont icon-ok"})):i("",!0),2==e.data.answerResult?(n(),l(j,{key:1,class:"iconfont icon-wrong"})):i("",!0)],64)):i("",!0)])),_:1})):i("",!0)])),_:1}),e.showAnswer?(n(),r(y,{key:0},[o(q,{class:"line"}),o(q,{class:"answer-analysis"},{default:u((()=>[o(q,{class:"title"},{default:u((()=>[m("- "),o(j,{class:"inner"},{default:u((()=>[m("试题详解")])),_:1}),m(" -")])),_:1}),o(q,{class:"difficulty-panel"},{default:u((()=>[o(q,{class:"part-title"},{default:u((()=>[m("难度")])),_:1}),o(q,{class:"star"},{default:u((()=>[o(L,{size:"20",readyonly:!0,value:e.data.difficultyLevel,activeColor:"#aa6bd9"},null,8,["value"])])),_:1})])),_:1}),o(q,{class:"part-title"},{default:u((()=>[m("题目解析")])),_:1}),o(q,{class:"rich-text"},{default:u((()=>[e.data.answerAnalysis?(n(),l(g,{key:0,content:e.data.answerAnalysis},null,8,["content"])):(n(),l(q,{key:1,class:"no-data"},{default:u((()=>[m(" 暂无答案解析 ")])),_:1}))])),_:1})])),_:1})],64)):i("",!0)])),_:1},8,["style"])}}},[["__scopeId","data-v-560da59a"]]);export{I as E};
