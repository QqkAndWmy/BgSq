import{g as a,r as e,E as l,A as t,L as s,b as o,h as u,o as n,w as d,c as r,F as c,f as i,i as m,a as p,_ as v,d as f,e as g,m as x,G as _,s as y}from"./index-BpbZ6T0G.js";import{_ as h}from"./uni-data-checkbox.GjnEvMPD.js";import{E as k}from"./ExamRecord.5Np1UW1h.js";const w={__name:"ExamNoFinishedModel",setup(v){const{proxy:f}=a(),g=e([]),x=async()=>{let a=await f.Request({url:f.Api.loadNoFinishedExam,showLoading:!0});a&&(null!=a.data&&a.data.length>0?(_.value.show(),g.value=a.data):_.value.close())},_=e();l((()=>{t(s.token.key)&&x()}));const y=()=>{_.value.close()};return(a,e)=>{const l=m,t=o("Dialog");return n(),u(t,{ref_key:"dialogRef",ref:_,title:"未完成的考试",showCancel:!1,okText:"开启新考试",okFun:y},{default:d((()=>[(n(!0),r(c,null,i(g.value,(a=>(n(),u(l,null,{default:d((()=>[p(k,{data:a,onReload:x},null,8,["data"])])),_:2},1024)))),256))])),_:1},512)}}},E=v({__name:"ExamIndex",setup(l){const{proxy:r}=a(),c=e([]);(async()=>{let a=await r.Request({url:r.Api.loadAllCategory,params:{type:1},showLoading:!1});a&&(c.value=a.data)})();const i=e(),v=a=>{0==a.detail.value.length?k.value=[]:k.value=c.value.map((a=>a.categoryId))},k=e([]),E=async()=>{if(0==k.value.length)return void r.Message.warning("请选择分类");const a=t(s.token.key);""!=a&&null!=a||y({url:"/pages/account/LoginAndRegister"});let e=await r.Request({url:r.Api.createExam,params:{categoryIds:k.value.join(",")}});e&&y({url:"./ExamQuestion?examId="+e.data.examId})};return(a,e)=>{const l=o("Navbar"),t=m,s=f(g("uni-data-checkbox"),h),r=_;return n(),u(t,null,{default:d((()=>[p(l,{showLeft:!1,title:"在线刷题"}),p(t,{class:"exam"},{default:d((()=>[p(t,{class:"category-title"},{default:d((()=>[x("请选择刷题科目")])),_:1}),p(s,{mode:"list",modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=a=>k.value=a),multiple:"",map:{text:"categoryName",value:"categoryId"},localdata:c.value},null,8,["modelValue","localdata"]),p(t,{class:"select-all"},{default:d((()=>[p(s,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value=a),onChange:v,multiple:"",localdata:[{value:1,text:"不怂，全勾上！"}]},null,8,["modelValue"])])),_:1}),p(t,{class:"btn-panel"},{default:d((()=>[p(r,{type:"primary",onClick:E},{default:d((()=>[x("开始刷题")])),_:1})])),_:1}),p(t,{class:"tips"},{default:d((()=>[x("选择你想检测的分类，进行测试")])),_:1})])),_:1}),p(w)])),_:1})}}},[["__scopeId","data-v-8fdb55c3"]]);export{E as default};
