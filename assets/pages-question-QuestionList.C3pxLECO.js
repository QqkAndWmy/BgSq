import{_ as a,g as e,u as t,r as o,b as s,h as l,o as c,w as u,a as r,i as n,c as d,y as i,m as g,F as y,f,l as m,t as v,z as p}from"./index-BpbZ6T0G.js";import{Q as _}from"./QuestionItem.DEA59qMN.js";import"./uni-rate.BSKBJ-Oq.js";const I=a({__name:"QuestionCategory",emits:["select"],setup(a,{expose:p,emit:_}){const{proxy:I}=e(),h=t(),w=o(),N=o(0),L=_,k=a=>{N.value=a.categoryId,L("select",{categoryName:a.categoryName,categoryId:a.categoryId+""}),w.value.close()};return p({show:a=>{N.value=a.categoryId,w.value.show()}}),(a,e)=>{const t=n,o=s("Popup");return c(),l(t,null,{default:u((()=>[r(o,{type:"right",ref_key:"categoryPoupRef",ref:w},{default:u((()=>[r(t,{class:"category-list"},{default:u((()=>[r(t,{class:i(["item",0==N.value?"active":""]),onClick:e[0]||(e[0]=a=>k({categoryId:0,categoryName:"全部分类"}))},{default:u((()=>[g(" 全部分类 ")])),_:1},8,["class"]),(c(!0),d(y,null,f(m(h).getInfo(),(a=>(c(),l(t,{class:i(["item",N.value==a.categoryId?"active":""]),onClick:e=>k(a)},{default:u((()=>[g(v(a.categoryName),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-358b4c49"]]),h=a({__name:"QuestionList",props:{showLeft:{type:Boolean,default:!0}},setup(a){const{proxy:t}=e(),d=o({categoryId:"0",categoryName:"全部分类"}),i=o({}),g=o(null),y=async()=>{g.value="loading";let a=await t.Request({url:t.Api.loadQuestion,showLoading:!1,params:{categoryId:d.value.categoryId,pageNo:i.value.pageNo||1}});a&&(g.value="more",i.value=a.data)},f=o(),m=()=>{f.value.show(d.value)},v=a=>{d.value=Object.assign({},a),y()};return p((a=>{if(Object.keys(a).length>0){let{categoryId:e,categoryName:t}=a;t=t?decodeURIComponent(t):"",d.value={categoryId:e,categoryName:t}}y()})),(e,t)=>{const o=n,p=s("Navbar"),h=s("DataList");return c(),l(o,null,{default:u((()=>[r(p,{showLeft:a.showLeft,title:d.value.categoryName},{right:u((()=>[r(o,{class:"iconfont icon-more-line",onClick:m})])),_:1},8,["showLeft","title"]),r(o,null,{default:u((()=>[r(o,{class:"question-list"},{default:u((()=>[r(h,{dataSource:i.value,onLoadData:y,loadStatus:g.value},{default:u((({data:a})=>[r(_,{data:a,categoryId:d.value.categoryId,showDetail:!0},null,8,["data","categoryId"])])),_:1},8,["dataSource","loadStatus"])])),_:1})])),_:1}),r(I,{ref_key:"questionCategoryRef",ref:f,onSelect:v},null,512)])),_:1})}}},[["__scopeId","data-v-58590f4c"]]);export{h as default};
